{% extends "shop/base.html" %}
{% load humanize %}

{% block title %}Riwayat Pesanan | AF Promotion{% endblock %}

{% block content %}

<style>
  * {
    font-family: "Poppins", sans-serif !important;
  }

  body {
    background: linear-gradient(180deg, #f8f5f4 0%, #f1ebe9 45%, #e7dfdc 100%);
  }

  .history-wrap {
    max-width: 1100px;
    margin: 2.4rem auto 4rem;
    padding: 1rem 1.4rem;
    animation: fadeIn 0.6s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .history-title {
    text-align: center;
    font-size: 1.9rem;
    font-weight: 700;
    color: #7A0E1A;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: .4rem;
  }

  .history-subtitle {
    text-align: center;
    color: #7A6E6C;
    margin-bottom: 2.2rem;
  }

  /* CARD STYLE */
  .order-card {
    background: radial-gradient(circle at top left, #ffffff 0%, #f7f4f2 70%, #ece3df 100%);
    padding: 1.4rem 1.6rem;
    border-radius: 20px;
    box-shadow:
      0 10px 26px rgba(0,0,0,0.08),
      inset 0 0 0 1px rgba(255,255,255,0.6);
    margin-bottom: 1.4rem;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  .order-card:hover {
    transform: translateY(-3px);
    box-shadow:
      0 16px 40px rgba(0,0,0,0.12),
      inset 0 0 0 1px rgba(255,255,255,0.7);
  }

  .order-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 1.2rem;
  }

  .order-info {
    flex: 1 1 48%;
  }

  .order-info p {
    margin: 0.25rem 0;
    color: #2C2524;
    font-size: 0.92rem;
  }

  /* STATUS BADGE */
  .status-badge {
    display: inline-block;
    padding: 0.4rem .9rem;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.07em;
    text-transform: uppercase;
    margin-top: 0.2rem;
  }

  .badge-PENDING { background: rgba(244, 158, 38, 0.18); color: #B45309; }
  .badge-PAID { background: rgba(16, 185, 129, 0.18); color: #047857; }
  .badge-PROCESSING { background: rgba(59, 130, 246, 0.18); color: #1D4ED8; }
  .badge-SHIPPED { background: rgba(14, 165, 233, 0.18); color: #0369A1; }
  .badge-COMPLETED { background: rgba(34, 197, 94, 0.18); color: #15803D; }
  .badge-CANCELLED { background: rgba(239, 68, 68, 0.18); color: #B91C1C; }

  /* TOTAL */
  .order-total {
    font-size: 1.15rem;
    font-weight: 700;
    color: #7A0E1A;
  }

  /* BUTTON DETAIL */
  .btn-detail {
    display: inline-block;
    padding: 0.6rem 1.2rem;
    background: #7A0E1A;
    color: #fff;
    text-decoration: none;
    border-radius: 999px;
    font-size: 0.82rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    box-shadow: 0 10px 22px rgba(122,14,26,0.45);
    transition: all 0.18s ease;
  }

  .btn-detail:hover {
    background: #A03B48;
    transform: translateY(-2px);
    box-shadow: 0 14px 32px rgba(122,14,26,0.55);
  }

  .no-orders {
    text-align: center;
    color: #7A6E6C;
    margin-top: 2rem;
  }
</style>

<div class="history-wrap">

  <h1 class="history-title">Riwayat Pesanan</h1>
  <p class="history-subtitle">Lihat daftar pesanan yang telah kamu buat di AF Promotion</p>

  {% if orders %}

    {% for order in orders %}
    <div class="order-card">
      <div class="order-row">

        <div class="order-info">
          <p><strong>ID Pesanan:</strong> #{{ order.id }}</p>
          <p><strong>Tanggal:</strong> {{ order.created_at|date:"d M Y - H:i" }}</p>

          <span class="status-badge badge-{{ order.status }}">
            {{ order.get_status_display }}
          </span>
        </div>

        <div class="order-info" style="text-align:right;">
          <p class="order-total">
            Rp {{ order.total|intcomma }}
          </p>

          <p style="color:#7A6E6C;font-size:.85rem;margin-top:.3rem;">
            {% if order.tracking_number %}
              Resi: {{ order.tracking_number }}
            {% else %}
              Belum dikirim
            {% endif %}
          </p>

          <a href="{% url 'shop:order_detail' order.id %}" class="btn-detail">Detail</a>
        </div>

      </div>
    </div>
    {% endfor %}

  {% else %}
    <p class="no-orders">Kamu belum punya pesanan.</p>
  {% endif %}

</div>

{% endblock %}
